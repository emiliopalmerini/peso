<div class="goal-form-container">
    <h2 class="goal-form__title">Imposta obiettivo</h2>
    <form class="goal-form" hx-post="/api/goals" hx-indicator=".indicator" hx-on="htmx:afterRequest: if(event.detail.successful) window.location.reload()">
        <input type="hidden" name="user_id" value="{{.UserID}}">

        <div class="field">
            <label for="goal-type">Tipo</label>
            <select id="goal-type" name="goal_type" required>
                <option value="">Seleziona...</option>
                <option value="weight_loss">Perdere peso</option>
                <option value="weight_gain">Aumentare peso</option>
                <option value="maintenance">Mantenere</option>
            </select>
        </div>

        <div class="field">
            <label for="target-weight">Peso target (kg)</label>
            <input type="number" id="target-weight" name="target_weight" step="0.1" min="10" max="500" required placeholder="70.0" inputmode="decimal">
            {{if .CurrentWeight}}
            <span class="caption">Peso attuale: {{.CurrentWeight.Value}} kg</span>
            {{end}}
        </div>

        <div class="field">
            <label for="target-date">Data target</label>
            <input type="date" id="target-date" name="target_date" min="{{.Today}}" required>
        </div>

        <div class="field">
            <label for="goal-notes">Note (opzionale)</label>
            <input type="text" id="goal-notes" name="notes" maxlength="200" placeholder="Motivazione o dettagli">
        </div>

        <div class="actions">
            <button type="submit" class="btn btn-primary">Imposta</button>
            <span class="indicator"><span class="spinner"></span> Salvataggio...</span>
        </div>
    </form>
</div>

<style>
    .goal-form-container {
        margin-top: var(--space-5);
        padding: var(--space-5);
        background: var(--ink-02);
        border-radius: var(--radius-lg);
        border: 1px solid var(--color-border-subtle);
    }

    .goal-form__title {
        font-size: var(--text-xl);
        font-weight: var(--weight-bold);
        letter-spacing: -0.02em;
        margin-bottom: var(--space-5);
        color: var(--color-text);
    }

    .goal-form .field {
        margin-bottom: var(--space-4);
    }

    .goal-form .actions {
        margin-top: var(--space-5);
        display: flex;
        align-items: center;
        gap: var(--space-4);
    }
</style>
